<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ÊîæÁΩÆ„Ç≤„Éº„É† - „ÇØ„ÉÉ„Ç≠„ÉºÂ∑•Â†¥</title>
<style>
    body {
        margin: 0;
        padding: 20px;
        background: #222;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
    }
    h1 { margin: 10px 0; }
    a { color: #ccc; text-decoration: none; }
    #game-container {
        max-width: 900px;
        margin: 20px auto;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }
    #clicker {
        background: #333;
        padding: 30px;
        border-radius: 15px;
        border: 3px solid #666;
    }
    #cookie {
        width: 200px;
        height: 200px;
        font-size: 150px;
        cursor: pointer;
        user-select: none;
        transition: transform 0.1s;
        margin: 20px auto;
        display: block;
    }
    #cookie:active {
        transform: scale(0.95);
    }
    #stats {
        background: #2a2a2a;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
    }
    .stat-row {
        display: flex;
        justify-content: space-between;
        margin: 10px 0;
        font-size: 18px;
    }
    .stat-label { color: #aaa; }
    .stat-value { color: #2f4; font-weight: bold; }
    #upgrades {
        background: #333;
        padding: 20px;
        border-radius: 15px;
        border: 3px solid #666;
    }
    .upgrade {
        background: #444;
        padding: 15px;
        margin: 10px 0;
        border-radius: 8px;
        border: 2px solid #555;
        cursor: pointer;
        transition: all 0.2s;
    }
    .upgrade:hover:not(.disabled) {
        background: #555;
        border-color: #2a7;
        transform: translateX(5px);
    }
    .upgrade.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    .upgrade-name {
        font-size: 18px;
        font-weight: bold;
        color: #2a7;
        margin-bottom: 5px;
    }
    .upgrade-desc {
        font-size: 14px;
        color: #aaa;
        margin: 5px 0;
    }
    .upgrade-cost {
        font-size: 16px;
        color: #fa0;
        margin-top: 5px;
    }
    .upgrade-owned {
        font-size: 14px;
        color: #2f4;
    }
    #total-cookies {
        font-size: 48px;
        font-weight: bold;
        color: #fa0;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        background: #c44;
        color: white;
        border: none;
        border-radius: 5px;
        margin: 10px 5px;
    }
    button:hover { background: #d55; }
</style>
</head>
<body>
<h1>üç™ ÊîæÁΩÆ„Ç≤„Éº„É† - „ÇØ„ÉÉ„Ç≠„ÉºÂ∑•Â†¥</h1>
<a href="index.html">‚Üê Êàª„Çã</a>

<div id="game-container">
    <div id="clicker">
        <div id="total-cookies">0</div>
        <div style="color:#aaa; margin-bottom:10px;">„ÇØ„ÉÉ„Ç≠„Éº</div>
        
        <div id="cookie" onclick="clickCookie()">üç™</div>
        
        <div id="stats">
            <div class="stat-row">
                <span class="stat-label">„ÇØ„É™„ÉÉ„ÇØÊØé:</span>
                <span class="stat-value" id="perClick">1</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">ÊØéÁßí:</span>
                <span class="stat-value" id="perSecond">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">ÂêàË®àÁîüÁî£:</span>
                <span class="stat-value" id="totalProduced">0</span>
            </div>
        </div>
        
        <button onclick="save()">„Çª„Éº„Éñ</button>
        <button onclick="resetGame()">„É™„Çª„ÉÉ„Éà</button>
    </div>
    
    <div id="upgrades">
        <h2 style="margin-top:0;">„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ</h2>
        <div id="upgradesList"></div>
    </div>
</div>

<script>
let cookies = 0;
let totalProduced = 0;
let clickPower = 1;
let cps = 0;

const upgrades = [
    {
        id: 'cursor',
        name: '„Ç´„Éº„ÇΩ„É´',
        desc: 'Ëá™ÂãïÁöÑ„Å´„ÇØ„É™„ÉÉ„ÇØ',
        baseCost: 15,
        cps: 0.1,
        owned: 0
    },
    {
        id: 'grandma',
        name: '„Åä„Å∞„ÅÇ„Å°„ÇÉ„Çì',
        desc: '„ÇØ„ÉÉ„Ç≠„Éº„ÇíÁÑº„ÅÑ„Å¶„Åè„Çå„Çã',
        baseCost: 100,
        cps: 1,
        owned: 0
    },
    {
        id: 'farm',
        name: 'Ëæ≤Â†¥',
        desc: '„ÇØ„ÉÉ„Ç≠„Éº„ÅÆÊùêÊñô„ÇíÊ†ΩÂüπ',
        baseCost: 500,
        cps: 8,
        owned: 0
    },
    {
        id: 'factory',
        name: 'Â∑•Â†¥',
        desc: 'Â§ßÈáèÁîüÁî£‰ΩìÂà∂',
        baseCost: 3000,
        cps: 47,
        owned: 0
    },
    {
        id: 'bank',
        name: 'ÈäÄË°å',
        desc: '„ÇØ„ÉÉ„Ç≠„Éº„ÅßÊäïË≥á',
        baseCost: 10000,
        cps: 260,
        owned: 0
    },
    {
        id: 'temple',
        name: 'Á•ûÊÆø',
        desc: 'Á•û„ÅÆÂä†Ë≠∑',
        baseCost: 40000,
        cps: 1400,
        owned: 0
    },
    {
        id: 'portal',
        name: '„Éù„Éº„Çø„É´',
        desc: 'Áï∞Ê¨°ÂÖÉ„Åã„Çâ„ÇØ„ÉÉ„Ç≠„Éº',
        baseCost: 1000000,
        cps: 7800,
        owned: 0
    }
];

function clickCookie() {
    cookies += clickPower;
    totalProduced += clickPower;
    updateDisplay();
}

function buyUpgrade(id) {
    const upgrade = upgrades.find(u => u.id === id);
    if (!upgrade) return;
    
    const cost = getCost(upgrade);
    if (cookies >= cost) {
        cookies -= cost;
        upgrade.owned++;
        updateCPS();
        updateDisplay();
    }
}

function getCost(upgrade) {
    return Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.owned));
}

function updateCPS() {
    cps = 0;
    upgrades.forEach(upgrade => {
        cps += upgrade.cps * upgrade.owned;
    });
}

function updateDisplay() {
    document.getElementById('total-cookies').textContent = Math.floor(cookies);
    document.getElementById('perClick').textContent = clickPower;
    document.getElementById('perSecond').textContent = cps.toFixed(1);
    document.getElementById('totalProduced').textContent = Math.floor(totalProduced);
    
    const upgradesList = document.getElementById('upgradesList');
    upgradesList.innerHTML = '';
    
    upgrades.forEach(upgrade => {
        const cost = getCost(upgrade);
        const div = document.createElement('div');
        div.className = 'upgrade' + (cookies >= cost ? '' : ' disabled');
        div.onclick = () => buyUpgrade(upgrade.id);
        
        div.innerHTML = `
            <div class="upgrade-name">${upgrade.name}</div>
            <div class="upgrade-desc">${upgrade.desc}</div>
            <div class="upgrade-desc">ÊØéÁßí +${upgrade.cps}</div>
            <div class="upgrade-cost">„Ç≥„Çπ„Éà: ${cost} „ÇØ„ÉÉ„Ç≠„Éº</div>
            <div class="upgrade-owned">ÊâÄÊúâ: ${upgrade.owned}</div>
        `;
        
        upgradesList.appendChild(div);
    });
}

function gameLoop() {
    cookies += cps / 10;
    totalProduced += cps / 10;
    updateDisplay();
}

function save() {
    const saveData = {
        cookies,
        totalProduced,
        clickPower,
        upgrades: upgrades.map(u => ({ id: u.id, owned: u.owned })),
        timestamp: Date.now()
    };
    localStorage.setItem('idleGameSave', JSON.stringify(saveData));
    alert('„Çª„Éº„Éñ„Åó„Åæ„Åó„ÅüÔºÅ');
}

function load() {
    const saveData = localStorage.getItem('idleGameSave');
    if (saveData) {
        const data = JSON.parse(saveData);
        cookies = data.cookies || 0;
        totalProduced = data.totalProduced || 0;
        clickPower = data.clickPower || 1;
        
        if (data.upgrades) {
            data.upgrades.forEach(saved => {
                const upgrade = upgrades.find(u => u.id === saved.id);
                if (upgrade) upgrade.owned = saved.owned;
            });
        }
        
        if (data.timestamp) {
            const offlineTime = (Date.now() - data.timestamp) / 1000;
            if (offlineTime > 0 && offlineTime < 86400) {
                const offlineGain = Math.floor(cps * offlineTime);
                if (offlineGain > 0) {
                    cookies += offlineGain;
                    totalProduced += offlineGain;
                    alert(`„Ç™„Éï„É©„Ç§„É≥‰∏≠„Å´ ${offlineGain} „ÇØ„ÉÉ„Ç≠„Éº„ÇíÁîüÁî£„Åó„Åæ„Åó„ÅüÔºÅ`);
                }
            }
        }
        
        updateCPS();
        updateDisplay();
    }
}

function resetGame() {
    if (confirm('Êú¨ÂΩì„Å´„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºüÂÖ®„Å¶„ÅÆ„Éá„Éº„Çø„ÅåÂâäÈô§„Åï„Çå„Åæ„Åô„ÄÇ')) {
        localStorage.removeItem('idleGameSave');
        cookies = 0;
        totalProduced = 0;
        clickPower = 1;
        cps = 0;
        upgrades.forEach(u => u.owned = 0);
        updateDisplay();
    }
}

window.addEventListener('beforeunload', () => {
    save();
});

load();
updateDisplay();
setInterval(gameLoop, 100);
</script>
</body>
</html>
